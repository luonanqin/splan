股票：需要筛选出交易活跃的股票再拉节省时间
1.延迟推送用polygon 29美元每月
2.历史数据用barchart拉 暂时免费下月收钱
3.实时推送用polygon 200美元每月

期权：
1.历史成交用polygon 79美元每月
2.实时成交用富途 暂时免费

一期事项：筛选出有期权产品的股票，和交易活跃的股票
1.拉取道指和纳指的所有股票（已完成）
2.拉取1中股票的期权链，用富途过滤出有期权链的股票（已完成）
3.把2中的股票到barchart中拉取历史数据（已完成）
4.对3中的历史数据看近一个月的数据，开盘、收盘、最高、最低这四个其中3个相同，且出现过十次以上，认为该股票交易不活跃，过滤掉（已完成）
5.对4中的数据，计算2022-10到12月的成交量，平均成交量再100w下的，认为该股票交易不活跃，过滤掉（已完成）
6.最终得到第一期候选股票（已完成）
7.下载候选股票的daily数据（进行中）
8.下载候选股票的weekly数据
9.下载候选股票的monthly数据

二期目标：校准数据，计算k线
1.把2000年前的daily数据补抓全（已完成）
2.下载周线数据（进行中）
3.结合补抓的数据，将周线的成交量修正，因为下载的成交量是按日平均，并不是总和（进行中）
4.同时校验补抓的daily数据看看是否有遗漏，如果有则重新补抓，直到完全正确（进行中）
5.daily补抓校验完以后，修正月线的成交量，前提是月线需要提前下载
6.用月线计算季线及年线，季线不需要下载

三期目标：计算指标
日、周、月、季、年分别计算5/10/20/30/120/250周期均线
日、周、月、季、年分别计算布林线
日、周、月、季、年分别计算macd线

候选策略
做多（均为日内盘中交易，不考虑盘前盘后）
注意：每个股票单独计算，因为每个股票的操盘手法可能会不一样

1.统计（最低价/收盘价）接近均线的距离多少，和对应第二天（一定时间内成交价/开盘价/收盘价），找到第二天价格点位大于前一天价格点位概率最高的均线距离（即该距离收盘前买入，第二天上涨的概率最高）
a.均线距离和当前价有关，不能使用固定价格计算均线

2.统计某段日期内四价的斜率与某根均线斜率的差值，找到n天内某x价与斜率差值为m的情况下，n+1天（开盘价/收盘价）高于前一日收盘价
a.n、x、m均为需要计算的值，如果计算量过大，可以指定某个值的范围，比如3<n<5

3.统计每支股票所有的交易历史，计算开盘低于布林下轨，并且收盘大于开盘的成功率，按照盈利比例从0%~6%及以上分别统计（已完成，实盘中）
a.计算每天开盘低于布林线下轨的比例，按照比例从高到低排序，开盘时从比例最高的开始买入，按最大可买入买进，在开盘一分钟内完成交易
b.分别以成功率（50%~100%）、止损比例（15%~40%）、股票价格（5、6、7）三个维度回测2022年整年和2023年4月20日前的历史交易，按照a的逻辑进行模拟交易，计算盈利情况

4.连续多天上涨，但是成交量连续下跌（顶背离），之后下跌
5.连续三天上涨，第三天长上影或收盘超上轨，之后下跌
6.突然上涨超上轨很多，然后连续多天微涨且上影线长，之后下跌
7.财报日跳空下跌，短时间内超过多少（比如5分钟内从开盘计算跌了5%），会继续下跌，直至收盘都处于较低位，可尝试期权策略做短期跟踪止盈。比如JRVR2023-11-09财报日（财报数据没找到合适的接口）
8.周线或月线超过布林线下轨后期会反弹（长线策略）
9.突然下跌超过布林线下轨收阳并放量，第二天上涨，可收盘前买第二天卖
10.突破布林线上轨，但是已收盘低于开盘且长上影线，第二天大概率下跌，可前一天收盘前买第二天收盘前卖
11.前一天开盘高于再前一天收盘，然后冲高回落并下跌，跌幅和冲高的幅度接近，第二天大概率下跌，可前一天收盘前买第二天收盘前卖
12.计算股票日内单边下跌和上涨的概率，达到一定涨跌幅时继续下跌和上涨概率较高，可中途参与继续下跌和上涨直至收盘或止损（议息日不执行该策略），可以光头光脚k线作为基础数据
13.计算历史光脚阴线第二天上涨的概率（光脚阴线每个股票比例不一样），找成功率高的收盘前买入第二天开盘立即卖出（失败）

交易
1.目前按照第三个策略得到最佳维度值，调用polygon api监听摆盘数据，调用富途api进行交易
a.计算2023年4月20之前每天盘前最后十秒有多少支股票满足均价低于实时布林下轨，以及开盘后十秒有多少支股票满足均价低于实时布林下轨，对比每天的这两组数据的差异。目的是为了看每天大概需要监听多少支股票

其他
1.交易执行避免财报时间段，包括盘前盘后盘中，具体如下：
a.盘前财报，盘中不交易，第二日再交易
b.盘后财报，盘中可交易，第二天一整天不交易，第三天交易
2.合股股票不再参与交易（因为价格虽然超过限价，但是合股表示该股风险高且流动性差）
3.拆股需要重抓数据，用barchart抓取数据范围更大
4.派股息不重抓，需要根据前复权因子重新刷新派股息当日之前的数据，之后的继续从polygon下载就行，直到下次派股息再按照同样的规则刷新（暂时没做，工作量比较大）